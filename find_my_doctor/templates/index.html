[[extend 'layout.html']]
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">
    <style>
        .dropdown-content {
            max-height: 13em;
            overflow: auto;
        }
    </style>
</head>

<body>
    <section class="hero is-primary">
        <div class="hero-body">
            <p class="title">
                Find Doctor By Symptoms
            </p>

        </div>
    </section>
    <nav class="level">
        <div class="level-item has-text-centered">
            <a class="button is-link" href="[[=URL('user_info')]]">
                User Info
            </a>
        </div>

        <div class="level-item has-text-centered">
            <a class="button is-link" href="[[=URL('doctors')]]">
                Doctors
            </a>
        </div>
    </nav>

    <section class="section">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-half is-centered">

                    <label class="label">Find a doctor near you</label>

                    [[=form]]

                    <div id="vue-target" v-cloak>
                        <div class="control block">
                            <input class="input" type="text" v-model="query" @keyup="search" />
                        </div>

                        <table class="table is-striped is full-width">
                            <tr>
                                <th></th>
                                <th></th>
                            </tr>
                            <tr v-for="r in results">
                                <th>{{r}}</th>
                                <!--
                                                <div v-if="has_symptom(r.symptom)">
                                                    <td><button class="button is-primary" @click="remove_symptom(r)"><Remove></button></td>
                                                </div>
                                                <div v-else>
                                                    <td><button class="button is-primary" @click="add_symptom(r)">Add</button></td>
                                                </div>
                                                -->
                                <td><button class="button is-primary" @click="add_symptom(r)">Add</button>
                                </td>
                            </tr>
                        </table>

                        <div v-for="s in symptom_list">{{s}}</div>
                    </div>

                    <section>
                    </section>

                    <h1 class="subtitle">Symptoms Listed:</h1>
                    <ul>
                        [[for row in rows:]]
                        <div class="box p-2 m-1">
                            [[=row["symptom_list"]]]
                            <!-- <a class="button is-danger" href="[[=URL('delete_symptom', row['symptom_list'], signer=url_signer)]]">
                                <span class="icon"><i class="fa fa-fw fa-trash"></i></span>
                              </a> -->
                        </div>
                        [[pass]]
                    </ul>

                </div>

                <div class="column is-half is-centered">
                    [[for i, row in disease.iterrows():]]
                    <li>[[=row["disease"]]] : [[=row["prob"]]]
                    </li>
                    [[pass]]


                </div>
            </div>
    </section>
</body>

</html>

[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
    let search_url = "[[=XML(search_url)]]";
    let update_symptom_url = "[[=XML(update_symptom_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]